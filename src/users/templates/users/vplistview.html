{% extends 'base.html' %}

{% block content %}

{{ object_list }}

<h4>Applications Needed your Action:</h4>
<table style="width:90%">
<tr class = 'table'>
    <th >Status</th>
    <th>Apply Date/Time</th>
    <th>Name</th>
    <th>Leave Type</th>
    <th>Start</th>
    <th>Thru</th>
    <th>Direct Supervisor</th>
  </tr>
{% for stuff in objec_list %}
	{% if stuff.secondstatus == "Pending" %}
		{% if stuff.user.is_nonteacher %}
		<tr class = 'table'>
			<td><a href = "{% url 'vpapprove' myid=stuff.id %}"> {{ stuff.secondstatus }}</td></a>
			<td> {{ stuff.created_at }}</td>
			<td> {{ stuff.user.username }} </td>
			<td> {{ stuff.nonteachertimeofftype }}</td>
			{% if stuff.starttime == None and stuff.endtime == None %}
				<td> {{ stuff.startdate}}</td>
				<td> {{ stuff.enddate}}</td>
			{% else %}
				<td> {{ stuff.startdate}} ({{ stuff.starttime }})</td>
				<td> {{ stuff.enddate}} ({{ stuff.endtime }})</td>
			{% endif %}	
			<td> {{ stuff.firststatus }}</td>
		</tr>
		{% else %}
			{% if stuff.teachertimeofftype == 'Official Leave (In School)' or stuff.teachertimeofftype == 'Official Leave (Outside)'%}
				{% if stuff.pickvp == user.user %}
				<tr class = 'table'>
					<td><a href = "{% url 'vpapprove' myid=stuff.id %}"> {{ stuff.secondstatus }}</td></a>
					<td> {{ stuff.created_at }}</td>
					<td> {{ stuff.user.username }} </td>
					<td> {{ stuff.teachertimeofftype }}</td>
					{% if stuff.starttime == None and stuff.endtime == None %}
						<td> {{ stuff.startdate}}</td>
						<td> {{ stuff.enddate}}</td>
					{% else %}
						<td> {{ stuff.startdate}} ({{ stuff.starttime }})</td>
						<td> {{ stuff.enddate}} ({{ stuff.endtime }})</td>
					{% endif %}	
					<td> Not Applicable</td>
				</tr>
				{% endif %}	
			{% else %}
				<tr class = 'table'>
					<td><a href = "{% url 'vpapprove' myid=stuff.id %}"> {{ stuff.secondstatus }}</td></a>
					<td> {{ stuff.created_at }}</td>
					<td> {{ stuff.user.username }} </td>
					<td> {{ stuff.teachertimeofftype }}</td>
					{% if stuff.starttime == None and stuff.endtime == None %}
						<td> {{ stuff.startdate}}</td>
						<td> {{ stuff.enddate}}</td>
					{% else %}
						<td> {{ stuff.startdate}} ({{ stuff.starttime }})</td>
						<td> {{ stuff.enddate}} ({{ stuff.endtime }})</td>
					{% endif %}	
					<td> Not Applicable</td>
				</tr>
			{% endif%}
		{% endif%}
	{% endif %}	
{% endfor %}

</table>
{% endblock %}