{% extends 'base.html' %}

{% block content %}

{% load crispy_forms_tags %}
<!--  -->

    <div class="content-section">
      <div class="media">
        <div class="media-body">
          <h4 class="account-heading">Applicant : {{ obj.user.username }}</h4>
          <p class="text-secondary">email address : {{ obj.user.email }}</p>
          {% if obj.user.is_teacher %}
          <p class="text-secondary">Teacher Type of Leave : {{ obj.teachertimeofftype }}</p>
          {% else%}
          <p class="text-secondary">Non Teacher Type of Leave : {{ obj.nonteachertimeofftype }}</p>
          {% endif %}
          <p class="text-secondary">Start Date : {{ obj.startdate }}</p>
          <p class="text-secondary">End Date : {{ obj.enddate }}</p>
          <p class="text-secondary">Duration : {{ obj.duration }}</p>
          <p class="text-secondary">Applicant Reason : {{ obj.reason }}</p><br>
          <h4 class="account-heading">科主任批核結果:</h4>          
          <p class="text-secondary">科主任 status : {{ obj.firststatus }}</p>
          <p class="text-secondary">科主任 comment : {{ obj.firstcomment }}</p><br>
        </div>
      </div>

  <form method = 'POST' enctype='multipart/form-data'> 
    {% csrf_token %}
    <fieldset class='form-group'>
      <legend class='border-bottom mb-4'> 副校長批核 </legend>
      <input  type="checkbox" id="checkbox1" onclick="changeHideStatus()"/>
          <label for="checkbox1">Reassign Application</label><br>
      <div class="endtimefield hide" id='input2'>{{ u_form.pickvp|as_crispy_field }}</div>
       <div class="starttimefield" id='input1'>{{ u_form.secondstatus|as_crispy_field }}</div> 
      {{ u_form.secondcomment|as_crispy_field }}



    </fieldset>
    <div class='form-group'>
      <button type="submit" class="btn btn-primary" onclick="return confirm('*** WARNING : Check your entry as this is an irreversible action. Do you really want to submit? ***');">Save</button>
    </div>
  </form>
  <script>
      $(document).ready(function(){
        $("#checkbox1").prop('checked', false);
        // changevp();
      });

      let input1;
      let input2;
      // function changevp(){
      //   if(document.getElementById("id_pickvp").value == 20){
      //       document.getElementById("id_pickvp").value = 18;
      //     }
      //     else{
      //       document.getElementById("id_pickvp").value = 20;
      //     }
      // }
      function changeHideStatus(){
        
        if(document.getElementById("checkbox1").checked == true){

          document.getElementById("input1").setAttribute("class", "hide starttimefield");
          document.getElementById("input2").setAttribute("class", "endtimefield");
          document.getElementById("id_secondstatus").value = "Pending";
          if(document.getElementById("id_pickvp").value == 20){
            document.getElementById("id_pickvp").value = 18;
          }
          else{
            document.getElementById("id_pickvp").value = 20;
          }
          console.log(document.getElementById("id_pickvp").value)
          
        }
        else{
          document.getElementById("input1").setAttribute("class", " starttimefield");
          document.getElementById("input2").setAttribute("class", "hide endtimefield");
          document.getElementById("id_secondstatus").value = "Pending" 
          if(document.getElementById("id_pickvp").value == 20){
            document.getElementById("id_pickvp").value = 18;
          }
          else{
            document.getElementById("id_pickvp").value = 20;
          }
          console.log(document.getElementById("id_pickvp").value)
        }
      }

    //   $(document).ready(function(){
    //     $("select").change(function(){
    //         $(this).find("option:selected").each(function(){
    //             var optionValue = $(this).attr("value");
    //             if(optionValue){
    //                 $("#id_pickvp").not("." + optionValue).hide();
    //                 $("." + optionValue).show();
    //             } else{
    //                 $(".box").hide();
    //             }
    //         });
    //     }).change();
    // });
    </script>
  </div>
{% endblock %}

<!-- 
<h1>In app template : {{ objec.user.username }}</h1>
<p>{{objec.timeofftype}}</p>
<p>{{objec.startdate}} </p>
<p>{{objec.enddate}} </p>
<p>{{objec.duration}} </p>
<p>{{objec.reason}} </p>
<p>{{objec.firststatus}} </p>
 -->


